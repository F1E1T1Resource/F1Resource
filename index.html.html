<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>F1 Resource</title>
<style>
  body { margin:0; font-family:Arial,sans-serif; background:#f5f5f5; }
  #loginBox { max-width:350px; margin:120px auto; padding:25px; background:white; border-radius:12px; box-shadow:0 0 15px rgba(0,0,0,0.2); text-align:center; }
  #loginBox h2 { margin-bottom:20px; }
  #loginBox input { width:90%; padding:10px; margin:8px 0; border-radius:6px; border:1px solid #ccc; }
  #loginBox button { padding:10px 20px; margin-top:10px; border:none; border-radius:6px; background:#007BFF; color:white; font-size:16px; cursor:pointer; }
  #loginBox button:hover { background:#0056b3; }

  #app { display:none; height:100vh; }
  #sidebar { width:250px; background:#1a1a1a; color:white; padding:20px; position:fixed; top:0; bottom:0; left:0; overflow-y:auto; transition:0.3s; }
  #sidebar h2 { margin-top:0; text-align:center; }
  #sidebar button { width:100%; padding:10px; margin:6px 0; border:none; background:#333; color:white; border-radius:6px; cursor:pointer; text-align:left; }
  #sidebar button:hover { background:#444; }
  #content { margin-left:270px; padding:20px; transition:0.3s; }
  .hidden { display:none; }
  .card { background:white; padding:15px; border-radius:10px; margin:12px 0; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
  input, select, textarea { width:100%; padding:8px; margin:5px 0; border-radius:6px; border:1px solid #ccc; }
  .role-hidden { display:none; }

  /* Responsive for mobile */
  @media(max-width:768px){
    #sidebar { position:relative; width:100%; height:auto; }
    #content { margin-left:0; }
  }
</style>
</head>
<body>

<!-- LOGIN -->
<div id="loginBox">
  <h2>Login</h2>
  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
  <p id="loginError" style="color:red;"></p>
</div>

<!-- APP -->
<div id="app">
  <div id="sidebar">
    <h2>F1 Resource</h2>
    <button onclick="showPage('home')">Home</button>
    <button onclick="showPage('departments')">Fire Departments</button>
    <button onclick="showPage('ems')">EMS Agencies</button>
    <button onclick="showPage('resources')">County Resources</button>
    <button onclick="showPage('coordinators')">County Coordinators</button>
    <button onclick="showPage('hazmat')">HazMat Search</button>
    <button onclick="showPage('ev')">EV Safety</button>
    <button onclick="showPage('firerisk')">Fire Risk</button>
    <button onclick="showPage('drivingsafety')">Driving Safety</button>
  </div>

  <div id="content">
    <div id="home" class="page">
      <h1>Welcome to F1 Resource</h1>
      <p>Your all-in-one emergency services resource for Oswego County.</p>
      <div class="card">
        <h3>Weather Alerts</h3>
        <p id="weatherAlerts">Active weather alerts will appear here.</p>
      </div>
    </div>

    <div id="departments" class="page hidden">
      <h2>Fire Departments</h2>
      <button class="role-hidden" onclick="addDepartment()">Add Department</button>
      <div id="departmentList"></div>
    </div>

    <div id="ems" class="page hidden">
      <h2>EMS Agencies</h2>
      <button class="role-hidden" onclick="addEMS()">Add EMS Agency</button>
      <div id="emsList"></div>
    </div>

    <div id="resources" class="page hidden">
      <h2>County Resources</h2>
      <button class="role-hidden" onclick="addResource()">Add Resource</button>
      <div id="resourceList"></div>
    </div>

    <div id="coordinators" class="page hidden">
      <h2>County Coordinators</h2>
      <button class="role-hidden" onclick="addCoordinator()">Add Coordinator</button>
      <div id="coordinatorList"></div>
    </div>

    <div id="hazmat" class="page hidden">
      <h2>HazMat Search</h2>
      <input id="hazmatInput" placeholder="Enter UN Number">
      <button onclick="searchHazMat()">Search</button>
      <div id="hazmatResult"></div>
    </div>

    <div id="ev" class="page hidden">
      <h2>EV Safety</h2>
      <input id="evYM" placeholder="Year Make Model">
      <button onclick="searchEV()">Search</button>
      <div id="evResult"></div>
    </div>

    <div id="firerisk" class="page hidden">
      <h2>Fire Risk</h2>
      <p>Add content here.</p>
    </div>

    <div id="drivingsafety" class="page hidden">
      <h2>Driving Safety</h2>
      <p>Add content here.</p>
    </div>
  </div>
</div>

<script>
  // -------------------
  // Local Users & Roles
  // -------------------
  const USERS = {
    "ADMIN": {password:"ADMIN", role:"admin"},
    "DEPTADMIN": {password:"DEPTADMIN", role:"deptadmin"},
    "DEPTUSER": {password:"DEPTUSER", role:"deptuser"}
  };
  let currentUserRole = null;

  function login() {
    const u = document.getElementById("username").value.trim();
    const p = document.getElementById("password").value.trim();
    if(USERS[u] && USERS[u].password === p) {
      currentUserRole = USERS[u].role;
      document.getElementById("loginBox").style.display="none";
      document.getElementById("app").style.display="flex";
      applyRolePermissions();
      showPage('home');
    } else {
      document.getElementById("loginError").textContent="Invalid login";
    }
  }

  function applyRolePermissions(){
    const elements = document.querySelectorAll('.role-hidden');
    if(currentUserRole === 'admin' || currentUserRole==='deptadmin'){
      elements.forEach(el=>el.style.display='block');
    } else {
      elements.forEach(el=>el.style.display='none');
    }
  }

  // -------------------
  // Pages Navigation
  // -------------------
  function showPage(id){
    document.querySelectorAll('.page').forEach(p=>p.classList.add('hidden'));
    document.getElementById(id).classList.remove('hidden');
  }

  // -------------------
  // Sample Data Storage (local)
  // -------------------
  let departments = [
    {name:"Central Fire Dept", battalion:"1", address:"123 Main St", apparatus:[{name:"Engine 1", status:"IN SERVICE"}]},
    {name:"Northside Fire Dept", battalion:"2", address:"456 North St", apparatus:[{name:"Ladder 1", status:"OOS"}]}
  ];

  let emsAgencies = [{name:"Oswego EMS", address:"789 Health Ave"}];
  let resources = [{name:"Water Rescue Boat", location:"Lakefront"}];
  let coordinators = [{name:"John Doe", department:"Central Fire Dept"}];

  // -------------------
  // Render Functions
  // -------------------
  function renderDepartments(){
    const list = document.getElementById('departmentList');
    list.innerHTML='';
    departments.forEach((d,i)=>{
      const card=document.createElement('div'); card.className='card';
      let appText = d.apparatus.map(a=>`${a.name} (${a.status})`).join(', ');
      card.innerHTML=`<strong>${d.name}</strong><br>Battalion: ${d.battalion}<br>Address: ${d.address}<br>Apparatus: ${appText}`;
      if(currentUserRole!=='deptuser'){
        const editBtn=document.createElement('button'); editBtn.textContent='Edit';
        editBtn.onclick=()=>{ editDepartment(i); };
        card.appendChild(editBtn);
      }
      list.appendChild(card);
    });
  }

  function addDepartment(){
    const name=prompt("Department Name:");
    const battalion=prompt("Battalion:");
    const address=prompt("Address:");
    if(name){ departments.push({name,battalion,address,apparatus:[]}); renderDepartments(); }
  }

  function editDepartment(index){
    const d=departments[index];
    const name=prompt("Department Name:",d.name);
    const battalion=prompt("Battalion:",d.battalion);
    const address=prompt("Address:",d.address);
    if(name){ d.name=name; d.battalion=battalion; d.address=address; renderDepartments(); }
  }

  function renderEMS(){ const list=document.getElementById('emsList'); list.innerHTML=''; emsAgencies.forEach((e,i)=>{const card=document.createElement('div'); card.className='card'; card.innerHTML=`<strong>${e.name}</strong><br>Address: ${e.address}`; if(currentUserRole!=='deptuser'){ const editBtn=document.createElement('button'); editBtn.textContent='Edit'; editBtn.onclick=()=>{ editEMS(i); }; card.appendChild(editBtn); } list.appendChild(card); }); }
  function addEMS(){ const name=prompt("EMS Name:"); const address=prompt("Address:"); if(name){ emsAgencies.push({name,address}); renderEMS(); } }
  function editEMS(index){ const e=emsAgencies[index]; const name=prompt("EMS Name:",e.name); const address=prompt("Address:",e.address); if(name){ e.name=name; e.address=address; renderEMS(); } }

  function renderResources(){ const list=document.getElementById('resourceList'); list.innerHTML=''; resources.forEach((r,i)=>{const card=document.createElement('div'); card.className='card'; card.innerHTML=`<strong>${r.name}</strong><br>Location: ${r.location}`; if(currentUserRole!=='deptuser'){ const editBtn=document.createElement('button'); editBtn.textContent='Edit'; editBtn.onclick=()=>{ editResource(i); }; card.appendChild(editBtn); } list.appendChild(card); }); }
  function addResource(){ const name=prompt("Resource Name:"); const location=prompt("Location:"); if(name){ resources.push({name,location}); renderResources(); } }
  function editResource(index){ const r=resources[index]; const name=prompt("Resource Name:",r.name); const location=prompt("Location:",r.location); if(name){ r.name=name; r.location=location; renderResources(); } }

  function renderCoordinators(){ const list=document.getElementById('coordinatorList'); list.innerHTML=''; coordinators.forEach((c,i)=>{const card=document.createElement('div'); card.className='card'; card.innerHTML=`<strong>${c.name}</strong><br>Department: ${c.department}`; if(currentUserRole!=='deptuser'){ const editBtn=document.createElement('button'); editBtn.textContent='Edit'; editBtn.onclick=()=>{ editCoordinator(i); }; card.appendChild(editBtn); } list.appendChild(card); }); }
  function addCoordinator(){ const name=prompt("Coordinator Name:"); const department=prompt("Department:"); if(name){ coordinators.push({name,department}); renderCoordinators(); } }
  function editCoordinator(index){ const c=coordinators[index]; const name=prompt("Coordinator Name:",c.name); const department=prompt("Department:",c.department); if(name){ c.name=name; c.department=department; renderCoordinators(); } }

  // -------------------
  // HazMat, EV, Weather placeholders
  // -------------------
  function searchHazMat(){ const n=document.getElementById('hazmatInput').value; document.getElementById('hazmatResult').innerHTML=`<p>HazMat data for UN ${n} (ERG 2024)</p>`; }
  function searchEV(){ const ym=document.getElementById('evYM').value; document.getElementById('evResult').innerHTML=`<p>EV Safety info for ${ym} (NHTSA guide)</p>`; }

  function loadAllData(){ renderDepartments(); renderEMS(); renderResources(); renderCoordinators(); }

  // -------------------
  // Initialize
  // -------------------
  document.addEventListener('DOMContentLoaded',()=>{ loadAllData(); document.getElementById('weatherAlerts').innerText="No active alerts currently."; });
</script>
</body>
</html>

