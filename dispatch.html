<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>F1 Resource â€“ Apparatus Mobile Login</title>

<style>
:root {
  --bg:#021022;
  --panel:#081727;
  --card:#0d1a2b;
  --accent:#0b5fff;
  --accent2:#7b5cff;
  --muted:#97a7c5;
  --radius:14px;
}

body {
  margin:0;
  padding:0;
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:linear-gradient(180deg,#020d1a,#031026,#041423);
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#e9f1ff;
}

.login-box {
  width:95%;
  max-width:400px;
  background:linear-gradient(180deg,#0b1624,#08121a);
  padding:26px;
  border-radius:var(--radius);
  border:1px solid rgba(255,255,255,0.05);
  box-shadow:0 0 25px rgba(0,0,0,0.4);
  text-align:center;
}

.logo img {
  height:90px;
  border-radius:14px;
}

h2 {
  margin:14px 0 4px;
  font-size:1.6rem;
  font-weight:800;
}

.sub {
  font-size:0.85rem;
  color:var(--muted);
}

.input {
  width:100%;
  margin-top:12px;
  padding:12px;
  background:rgba(255,255,255,0.03);
  border:1px solid rgba(255,255,255,0.08);
  border-radius:10px;
  color:#e9f1ff;
  font-size:1rem;
}

.input:focus {
  outline:2px solid var(--accent);
}

.btn {
  width:100%;
  margin-top:14px;
  padding:12px;
  border-radius:10px;
  border:none;
  font-weight:700;
  cursor:pointer;
}

.primary {
  background:linear-gradient(90deg,var(--accent),var(--accent2));
  color:#001020;
}

.secondary {
  background:transparent;
  color:var(--muted);
  border:1px solid rgba(255,255,255,0.06);
}

.err {
  margin-top:10px;
  color:#ff8a8a;
  font-size:0.9rem;
}
</style>
</head>

<body>

<div class="login-box">
  <div class="logo">
    <img src="https://c6ee69d755.cbaul-cdnwnd.com/af0c9920a8129f9bf9a0921ecfe9d264/200000017-17b1717b1a/700/F1Resource-removebg-preview.webp?ph=c6ee69d755">
  </div>

  <h2>Apparatus Login</h2>
  <div class="sub">Sign in using your assigned unit credentials</div>

  <input id="apUser" class="input" placeholder="Unit Username (e.g., ENGINE511)">
  <input id="apPass" class="input" type="password" placeholder="Password">

  <button id="btnLogin" class="btn primary">Login</button>
  <button id="btnBack" class="btn secondary">Back to Main Login</button>

  <div id="msg" class="err"></div>
</div>

<script>
// Local apparatus accounts (Option A system)
function loadAppUsers(){
  try { return JSON.parse(localStorage.getItem("f1_apparatus_local_v1")||"{}"); }
  catch(e){ return {}; }
}

// Ensure demo units exist if empty
let appUsers = loadAppUsers();
if(Object.keys(appUsers).length === 0){
  appUsers = {
    "ENGINE511": { password:"ENGINE511", label:"Engine 511" },
    "ENGINE512": { password:"ENGINE512", label:"Engine 512" }
  };
  localStorage.setItem("f1_apparatus_local_v1", JSON.stringify(appUsers));
}

document.getElementById("btnBack").onclick = () => {
  window.location.href = "index.html";
};

document.getElementById("btnLogin").onclick = () => {
  const u = document.getElementById("apUser").value.trim().toUpperCase();
  const p = document.getElementById("apPass").value.trim();

  if(!u || !p){
    msg.textContent = "Please enter username and password";
    return;
  }

  const users = loadAppUsers();
  if(!users[u] || users[u].password !== p){
    msg.textContent = "Invalid apparatus credentials";
    return;
  }

  // Save session (SSO)
  sessionStorage.setItem("f1_apparatus_user", u);

  // Redirect to dispatch main screen
  window.location.href = "dispatch.html";
};
</script>

</body>
</html>

